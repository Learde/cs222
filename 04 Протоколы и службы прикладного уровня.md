**Сетевой адрес процесса** - это пара IP : Port, например: 127.0.0.1:80

Процесс обращается к службам транспортного уровня:
- *TCP* - службе надежной передачи данных, устанавливающей логическое соединение
- *UDP* - службе ненадежной, но быстрой, передачи

Как операционная система узнает какому процессу передать полученное по сети сообщение - по его сетевому номеру, т.е. **номеру порта**;

**Клиенты и серверы** – это программы, т.е. процессы. На одном компьютере могут быть запущено несколько клиентов или несколько серверных процессов.

**Номер порта** – это целое число, которое используется для идентификации процесса, выполняющегося на данном компьютере.
- От 1 до 1023 – хорошо известные номера портов,
- От 1023 до 65 535 – другие.

*Клиентская программа формирует запрос, посылает его на сервер, сервер обрабатывает и возвращает ответ.*

---

Служба определяет:
- то, как работает клиент
- то, как работает сервер, указывает стандартный номер его порта
- протокол - формат и последовательность сообщений, которыми обмениваются клиент и сервер

Примеры служб и протоколов:
- WWW (HTTP, 80; HTTPS, 443)
- E-mail (SMTP, 25; POP3, 110; IMAP, 143)
- DNS (DNS, 53)
- FTP (FTP, 21,20)
- Telnet (Telnet, 23); SSH (SSH, 22)
- Синхронизация часов (NTP, 123)
- Передача мультимедиа (RTSP, 554)
- Совместный доступ к файлам (SMB, 445)
***Замечание**: до скобок идет название службы, в скобочках название протокола и его стандартный порт*

Аббревиатуры из примеров:
- **DNS** - Domain Name System
- **NTP** - Network Time Protocol
- **RTSP** - Real Time Streaming Protocol (Потоковый протокол реального времени)
- **SMB** - Server Message Block
- **NFS** – Network File System

---

#### Службы разрешения имен

**Файл hosts** – файл статического сопоставления имен компьютеров и их ip-адресов

Служба разрешения имен **NetBIOS** и ее реализация в Windows - **WINS** (*Windows Internet Naming Service*)
Файл **lmhosts** – файл статического сопоставления NetBIOS-имен и IP-адресов.

**DNS** (*Domain Name System*) – стандартная служба разрешения имен в Интернет

##### Пояснения
**Файл hosts** - грубо говоря, локальный DNS. В нем перечислены доменные имена и соответствующие им IP-адреса для сопоставления. Приоритет выше, чем у DNS.

**NetBIOS**. Каждому компьютеру присваивается уникальный идентификатор в локальной сети и если хочется поднять локальную сеть, то вместо DNS можно сопоставить IP-адреса и эти идентификаторы (NetBIOS-имена).

**lmhosts** - это служебный файл для WINS, то есть для ОС Windows, который и занимается сопоставлением NetBIOS-имен и IP-адресов.

---

#### Доменные имена

Каждый компьютер в Интернете имеет свой IP-адрес – 4 числа от 0 до 255, например, 195.208.248.225 – адрес одного из компьютеров в ЮГИНФО. Такой адрес очень удобен при маршрутизации, так как определяет месторасположение компьютера в сети Интернет. Однако, такие числа совсем неудобны для восприятия пользователем. Более того, если, например, ваш email: sasha007@207.176.39.176 и ваша почтовая служба решила сменить сервер, то вместе с ним измениться и email.

*Гораздо лучше, когда компьютер имеет мнемоническое имя, например, mail.ru, yandex.ru, google.com, sasha007@mail.ru*

Когда-то давно в сети ARPANET соответствие между текстовыми и двоичными адресами просто записывалось в файле host.txt, в котором перечислялись все хосты и их IР-адреса. Каждую ночь все хосты получали этот файл с сервера, на котором он хранился. В сети, состоящей из нескольких сотен больших машин, работающих под управлением системы с разделением времени, такой подход работал вполне приемлемо.
Некоторые «пережитки» этого метода можно обнаружить и сейчас: существует файл HOSTS (и в UNIX, и в Windows), в котором можно прописывать адреса серверов, с которыми вы регулярно работаете.

На смену этому файлу пришел DNS - иерархическая структура имен. Существует «корень дерева» с именем "." (точка). Так как корень един для всех доменов, то точка в конце имени обычно не ставится. Ниже корня лежат домены первого уровня.

Домены верхнего уровня разделяются на две группы: родовые домены и домены государств. К родовым относятся домены com (commercial - коммерческие организации), edu (educational - учебные заведения), gov (government - федеральное правительство США), int (international - определенные международные организации), mil (military - вооруженные силы США), net (network — сетевые операторы связи) и org (некоммерческие организации). За каждым государством в соответствии с международным стандартом ISO 3166 закреплен один домен государства. Еще ниже находятся домены второго уровня, например, rsu.ru. Еще ниже — третьего (math.rsu.ru) и т.д.

В ноябре 2000 года ICANN было утверждено 4 новых родовых имени доменов верхнего уровня, а именно: biz (бизнес), info (информация), name (имена людей) и pro (специалисты, такие как доктора и адвокаты). Кроме того, по просьбе соответствующих отраслевых организаций были введены еще три специализированных имени доменов верхнего уровня: aero (аэрокосмическая промышленность), coop (кооперативы) и museum (музеи). В будущем появятся и другие домены верхнего уровня.

Можно регистрировать домены на кириллице, вот пример работающего сайта: http://цюрих.com/. В конце 2008г. появился домен верхнего уровня .РФ.

В принципе, получить домен второго уровня типа name-of-company.com несложно. Надо лишь проверить, не занято ли желаемое имя домена кем-то другим и не является ли оно чьей-нибудь торговой маркой. Для этого надо зайти на сайт регистрационного бюро верхнего уровня (в данном случае соm). Если все в порядке, заказчик регистрируется и за небольшую ежегодную абонентскую плату получает домен второго уровня (600 руб в год - ru). На сегодняшний день в качестве имен поддоменов соm уже используются практически все общеупотребительные английские слова.

Имена доменов нечувствительны к изменению регистра символов. Так, например, edu и EDU означают одно и то же. Длина имен компонентов может достигать 63 символов, а длина полного пути не должна превосходить 255 символов.

Структура доменов отражает не физическое строение сети, а логическое разделение между организациями и их внутренними подразделениями. Так, если факультеты компьютерных наук и электротехники располагаются в одном здании и пользуются одной общей локальной сетью, они, тем не менее, могут иметь различные домены. И наоборот, если, скажем, факультет компьютерных наук располагается в двух различных корпусах университета с различными локальными сетями, логически все хосты обоих зданий обычно принадлежат к одному и тому же домену.

Размер доменного имени ограничивается по административным и техническим причинам. Обычно разрешается регистрация доменов длиной до 63 символов.

.рф (Российская Федерация) — национальный домен верхнего уровня для России. Первый в Интернете домен на кириллице. Отличием от введённого ранее домена «.ru» является то, что в домене «.рф» все имена второго уровня пишутся исключительно кириллицей. На данный момент зарегистрировано около миллиона доменных имен

Схематически доменные имена:
![[Pasted image 20230701161906.png]]

Например, my.east.slon.edu. "." - это корень доменного имени, edu - это домен верхнего уровня (к тому же, родовой), slon - домен второго уровня, east - третьего и my - четвертого. 

in-addr.arpa — специальная доменная зона, предназначенная для определения имени хоста по его IPv4-адресу, используя PTR-запись. Адрес хоста AAA.BBB.CCC.DDD транслируется в обратной нотации и превращается в DDD.CCC.BBB.AAA.in-addr.arpa. Благодаря иерархической модели управления именами появляется возможность делегировать управление зоной владельцу диапазона IP-адресов. Для этого в записях авторитативного DNS-сервера указывают, что за зону CCC.BBB.AAA.in-addr.arpa (то есть за сеть AAA.BBB.CCC/24) отвечает отдельный сервер. 

Пример:
DNS-запись in-addr.arpa выглядит так:
```
56.34.12.10.in-addr.arpa. IN PTR host1.example.net.
```
Это будет означать, что IP-адресу _10.12.34.56_ соответствует имя хоста _host1.example.net_.

Родовые доменные имена верхнего уровня:
- com (commercial - коммерческие организации) 
- edu (educational - учебные заведения),
- gov (government - федеральное правительство США),
- int (international - определенные международные организации),
- mil (military - вооруженные силы США)
- net (network - сетевые операторы связи) 
- org (organization - некоммерческие организации)
- biz (business - бизнес)
- info (information - информация)
- name (name - имена людей)
- pro (professional - специалисты, такие как доктора и адвокаты)
- aero (aero - аэрокосмическая промышленность)
- coop (cooperative - кооперативы)
- museum (museum - музеи)

---

#### Служба трансляции имен DNS
- Клиенты DNS – специализированные библиотеки (или программы) для работы с DNS (в Windows – служба «DNS-клиент»)
- Серверная сторона DNS – множество серверов имен, рассредоточенных по миру и осуществляющих поиск в распределенной базе данных доменных имен.
- Порт сервера – 53.
- Серверное ПО: BIND (демон named), NSD, Windows DNS Server

##### Пояснения

Суть системы DNS заключается в иерархической схеме имен, основанной на доменах, и распределенной базе данных, реализующей эту схему имен. В первую очередь эта система используется для преобразования имен хостов и пунктов назначения электронной почты в IР-адреса, но также может использоваться и в других целях. Определение системы DNS дано в RFC 1034 и 1035.

В общих чертах система DNS применяется следующим образом. Для преобразования имени в IР-адрес прикладная программа обращается к библиотечной процедуре, называющейся *распознавателем*, передавая ей имя в качестве параметра. Распознаватель посылает UDP-пакет локальному DNS-серверу, который ищет имя в базе данных и возвращает соответствующий IР-адрес распознавателю, который, в свою очередь, передает этот адрес вызвавшей его прикладной программе. Имея IР-адрес, программа может установить TCP-соединение с адресатом или послать ему UDP-пакеты.

Система DNS — улица с двусторонним движением. DNS не только отыскивает IP-адрес по заданному имени хоста, но способна выполнять и обратную операцию, т.е. по IP-адресу определять имя хоста в сети. Многие Web- и FTP-серверы в сети Internet ограничивают доступ на основе домена, к которому принадлежит обратившийся к ним клиент. Получив от клиента запрос на установку соединения, сервер передает IP-адрес клиента DNS-серверу как обратный DNS-запрос. Если клиентская зона DNS настроена правильно, то на запрос будет возвращено имя клиентского хоста, на основе которого затем принимается решение о том, допустить данного клиента на сервер или нет.

**BIND** (*Berkeley Internet Name Domain*) - это одна из реализаций идеи и спецификаций DNS. Самая популярная, одна из самых совершенных на данный момент, но не единственная. BIND обеспечивает поиск доменных имен и IP адресов для любого узла Сети, взаимодействие с системой электронной почты, поддержку программного обеспечения динамической настройки хостов и т.п. Именно BIND установлен на серверах обеспечивающих поддержку корневой зоны.

**NSD** (*Name Server Daemon*) - сервер DNS с открытым исходным кодом. NSD разрабатывался с нуля в качестве только ответственного сервера (то есть, не реализует рекурсивные запросы и кэширование). Одной из целей разработки являлось повышение разнообразия DNS-серверов и, следовательно, повышение устойчивости системы доменных имен к ошибкам в программном обеспечении и атакам на уязвимости.
NSD использует файлы описаний зон в стиле BIND и может использовать файлы BIND без изменений. Вся информация компилируется с помощью zonec в двоичный формат (nsd.db) для ускорения загрузки. Также в процессе компиляции могут быть выявлены ошибки синтаксиса, что позволяет исправить их еще до того, как они станут доступны серверу. 

---

#### Роли DNS-серверов

Корневые серверы DNS — это серверы DNS, содержащие информацию о Доменах верхнего уровня, конкретнее — указатели на серверы DNS, поддерживающие работу каждого из этих доменов. Основные корневые серверы DNS обозначаются латинскими буквами от A до М (*a.root-servers.net, b.root-servers.net, ..., m.root-servers.net*). Они управляются различными организациями, действующими по согласованию с ICANN. Количество серверов ограничено в связи с максимальным объёмом UDP-пакета (большее количество серверов потребовало бы перехода на TCP-протокол для получения ответа, что существенно бы увеличило нагрузку).

У многих корневых серверов DNS существуют зеркала. В частности, российское зеркало сервера F расположено в РосНИИРОС.

IP-адреса корневых DNS-серверов можно получить в Linux командой 
```
dig . NS
```
(dig точка NS; точка – корневой домен)

или в Windows
```
nslookup -type=NS .
```

Корневые серверы имен размещаются в нескольких безопасных местах с высокоскоростным доступом, чтобы справиться с нагрузкой трафика. Изначально все эти установки находились в Соединенных Штатах. Однако, с течением времени распределение изменилось, и это уже не так. Обычно каждая установка DNS-сервера на определенном сайте физически представляет собой кластер машин с маршрутизаторами балансировки нагрузки. Подробный список серверов, их местоположения и свойства доступны на [http://root-servers.org](http://root-servers.org). На июнь 2013 года в мире существовало 374 корневых сервера.

**Authoritative DNS-server** — сервер, отвечающий за какую-либо зону. Подробнее: это сервер, который является официальным источником информации о конкретной зоне доменного имени. Он содержит полную и точную копию записей для данной зоны и отвечает на запросы о соответствующих доменных именах и их связанных данных. Авторитетный DNS-сервер имеет наивысший приоритет при предоставлении информации о конкретном домене.

**Primary/secondary DNS server** - это две основные роли в системе DNS-серверов. Первичный DNS-сервер (primary DNS server) содержит официальные записи для определенной зоны и выполняет функцию авторитетного DNS-сервера для этой зоны. Он получает и хранит информацию о доменных именах и их соответствующих IP-адресах. Вторичный DNS-сервер (secondary DNS server) получает реплику данных от первичного сервера и служит как резервный источник информации. Он помогает распределять нагрузку и обеспечивает отказоустойчивость системы DNS.

**DNS Resolver** - это компонент сети, который преобразует доменные имена, которые мы вводим в веб-браузере, в соответствующие IP-адреса. Он выполняет процесс разрешения доменных имен, обращаясь к авторитетным DNS-серверам и запрашивая информацию о доменных записях. DNS-resolver является посредником между пользовательским устройством и DNS-серверами, обеспечивая связь между доменными именами и соответствующими IP-адресами.

Схема расположение корневых DNS серверов
![[Pasted image 20230701175302.png|700]]

---

#### Дополнительные функции DNS-сервера
- Поддержка псевдонимов серверов. Пример: mmcs.sfedu.ru, web.mmcs.sfedu.ru и web.mmcs.rsu.ru, www.mmcs.sfedu.ru имеют один и тот же ip-адрес
- Поддержка почтового сервера домена.
  *Можно узнать ip-адрес почтового сервера в домене (используется при пересылке почты).*
- Распределение нагрузки между серверами.
  *Одно доменное имя соответствует нескольким серверам, следовательно, по запросу служба может вернуть несколько IP–адресов. Например, www.microsoft.com обслуживает несколько серверов. При этом первый по списку сервер меняется от запроса к запросу. Системы обычно берут первый IP-адрес. Загрузка происходит попеременно (то к одному серверу – то к другому), но мы, как пользователи, этого не замечаем.*
- Кэширование (*авторитетная* и *неавторитетная* информация)
  ***Авторитетная информация** – ответ полученный от Authoritative DNS-server. 
  **Неавторитетная информация** – ответ полученный от другого DNS-сервера, в кеше которого оказалась нужная запись.*

---

#### Принципы работы DNS. Пример работы
![[Pasted image 20230701180544.png|500]]

Рассмотрим схему подачи запроса серверу. Преподаватель Университета Станфорд с университетского компьютера пытается зайти на сайт воскресной компьютерной школы мехмата sunschool.mmcs.sfedu.ru. Чтобы определить IP-адрес компьютера sunschool.mmcs.sfedu.ru, браузер преподавателя вызывает DNS-клиент (resolver) – функцию API операционной системы. Она, используя IP-адрес локального DNS-сервера из настроек сети на компьютере преподавателя, посылает запрос (в виде UDP-пакета) DNS-серверу (пусть сервер будет atalante.stanford.edu(не отвечает на запросы извне – так что протестировать не удастся, а authdns4.netcom.duke.edu – не рекурсивный)).

Предположим, что локальный сервер Станфордского университета имен не знает IP-адреса sunschool.mmcs.sfedu.ru. Он посылает запрос одному из корневых серверов, адреса которых содержатся в его базе данных, пусть это будет f.root-servers.net.Таким образом получается рекурсивный запрос: DNS-клиент преподавателя обращается к локальному DNS-серверу, а тот к корневому.

Маловероятно, чтобы корневой сервер знал адрес хоста sunschool.mmcs.sfedu.ru. Скорее всего, он даже не знает адреса сервера sfedu.ru, однако он должен знать все свои дочерние домены – домены верхнего уровня. Но продолжать рекурсию он не будет. Дело в том, что корневые домены сильно загружены запросами, поэтому сконфигурированы так, что возвращают список DNS-серверов, которые должны больше знать о sunschool.mmcs.sfedu.ru – это DNS-серверы домена ru. Получив список DNS-серверов, локальный сервер Станфордского университета направляет запрос одному из серверов списка (обычно первому), например, ns.ripn.net. Тот тоже загружен и возвращает адреса DNS-серверов дочерней зоны sfedu.ru. (Последние два запроса называются итеративными от слова «итерация») Затем локальный сервер Станфордского университета обращается к первому в списке серверу домена sfedu.ru. Пусть это будет ns.sfedu.ru. В данном примере оказалось, что он тоже не знает IP-адреса sunschool.mmcs.sfedu.ru. DNS-сервер нашего университета не так загружен, как корневые серверы или серверы доменов верхнего уровня, поэтому его сконфигурировали выполнять рекурсивные запросы. Он обращается к серверу домена mmcs.sfedu.ru – это ns.mmcs.sfedu.ru, получает искомый IP-адрес и возвращает его в ответе локальному серверу Станфордского университета, который в свою очередь сообщает его компьютеру преподавателя

Когда записи ресурсов попадают на сервер имен Станфордского университета, они помещаются в кэш на случай, если они понадобятся еще раз. Однако, информация в кэше не является авторитетной, так как изменения в домене sfedu.ru не будут распространяться автоматически на все кэши, в которых может храниться копия этой информации. По этой причине записи кэша обычно долго не живут. В каждой записи ресурса присутствует поле Time_to_live. Оно сообщает удаленным серверам, насколько долго следует хранить эту запись в кэше.

Набор DNS-серверов в ответе на запрос все время один и тот же. Однако, последовательность серверов в списке меняется от запроса к запросу. Так как программы обычно берут первое имя из списка, то они обращаются к разным серверам. Таким образом нагрузка равномерно распределяется между DNS-серверами списка.

---

DNS-сервер, отвечающий за имена хостов в своей зоне, должен хранить информацию о хостах в базе данных и выдавать ее по запросу с удаленных компьютеров. База данных DNS представляет собой текстовый файл, состоящий из исходных записей RR (resource records). Эти записи описывают компьютеры и их функции в локальной зоне. Для организации обмена информацией с удаленными серверами DNS на сервере должно быть запущено программное обеспечение сервера DNS (обычно это программа named).

Прежде всего в базе данных сервера DNS должна быть объявлена зона, за которую данный сервер несет ответственность. Далее в ней должны быть объявлены все хост-компьютеры, имеющиеся в зоне. И, наконец, в базе данных можно объявлять специальную информацию, касающуюся зоны (например, о серверах электронной почты и DNS-серверах). Формат записи базы данных был разработан таким образом, чтобы DNS-сервер мог почерпнуть из нее любую информацию, нужную для его работы. В табл. приведены основные типы исходных записей, которые могут присутствовать в базе данных DNS. База данных DNS в последнее время стала темой для дискуссий среди исследователей. Так как многие хотят дополнить ее новыми возможностями и наряду с этим повысить уровень безопасности. В настоящее время в базу данных DNS постоянно вносятся новые типы записей. В табл. отражены лишь основные типы записей, которые необходимы для открытия и ведения новой зоны в базе данных DNS.

Resource Record:
![[Pasted image 20230701184453.png|400]]

---

#### Зона
**Зона** - логический узел в дереве DNS-имён
- Файл описания зоны, содержит совокупность записей о ресурсах и доменах следующего (более низкого) уровня, расположенных в текущем домене.
- В каждой зоне должен быть как минимум один сервер имен
- Каждому серверу имен известен адрес хотя бы одного родительского сервера имен

---

#### Структура DNS-сообщения
Запросы и ответы имеют один формат:
- Заголовок, включающий в себя идентификатор, размер сообщения, кол-во вопросов/ответов и т.д. (12 байтов)
- Секция вопросов (название, тип)
- Секция ответов (набор записей из БД DNS)
- Секция полномочности, которая содержит ссылки на полномочные сервера ("Не знаю, но знаю у кого спросить")
- Дополнительная информация ("IP-адреса тех, у кого можно еще спросить")

Схема:

![[Pasted image 20230701193231.png]]

**Идентификатор запроса (Query ID)** Это уникальный идентификатор, созданный в пакете запроса, который сервер отправляет в ответе: он позволяет серверу, отправляющему запрос, связать ответ с соответствующим вопросом. На одном сервере имен может быть много незавершенных запросов, даже несколько запросов к одному серверу, поэтому этот идентификатор запроса помогает сопоставить ответы с ожидающими вопросами. Иногда его также называют идентификатором транзакции (TXID).

**QR (Query / Response)** Устанавливается в 0 для запроса от клиента и в 1 для ответа от сервера.

**Opcode** (4 бита) Устанавливается клиентом в 0 для стандартного запроса; другие типы не используются в наших примерах.

**AA** **(Authoritative Answer)** Устанавливается в 1 в ответе сервера, если этот ответ является авторитетным, и в 0, если нет.

**TC (Truncated)** Устанавливается в 1 в ответе сервера, если ответ не помещается в ограничение 512 байт ответа UDP-пакета; это означает, что клиенту нужно будет повторить запрос с использованием TCP, который не имеет таких ограничений.

**RD (Recursion Desired)** Клиент устанавливает это значение в 1, если он желает, чтобы сервер выполнил полное рекурсивное разрешение имени, или в 0, если он хочет получить наилучшую информацию, которой располагает сервер, и клиент продолжит итеративный запрос самостоятельно. Не все серверы имен будут выполнять рекурсивный запрос (например, корневые серверы никогда не выполняют рекурсивные запросы).

**RA (Recursion Available)** Сервер устанавливает это значение для указания, поддерживает (1) или не поддерживает (0) ли он рекурсию.

**Z** **- reserved** - Это зарезервированное поле и должно быть равно нулю.

**rcode** Код ответа от сервера: указывает на успешность (0), отказ (5) и т. д.

**Количество записей вопроса (Question record count)** Клиент заполняет следующий раздел одной записью "вопроса", который указывает, что он ищет:

- в нем содержится имя ([www.unixwiz.net](http://www.unixwiz.net)) в формате: 3www7unixwiz3net0 (длина - 1 байт),
- тип 2 байта (A - 0x0001, NS - 0x0002, MX - 0x000f и т. д.) и класс 2 байта (почти всегда IN=Интернет 0x0001). Сервер повторяет вопрос в пакете ответа, поэтому количество вопросов практически всегда равно 1.

**Количество записей ответа/авторитета/дополнительной информации (Answer/authority/additional record count)** Эти значения устанавливаются сервером и содержат различные типы ответов на запросы клиента. Мы рассмотрим эти ответы подробнее.

**Данные DNS вопроса/ответа** Это область, которая содержит данные вопроса/ответа, на которые ссылается количество записей выше. Эти данные будут подробно рассмотрены позднее.

Пример DNS-запроса:
![[Pasted image 20230701193918.png]]

Пример DNS-ответа:
![[Pasted image 20230701193940.png]]
Сервер GTLD, которому мы обратились, не знает конкретного ответа на наш вопрос, но он знает, куда обратиться: в ответе он предоставляет серию записей NS, которые должны знать, как обработать наш запрос. Они отображаются в разделе "Авторитеты" как cs.unixwiz.net и linux.unixwiz.net. Нам даны имена хостов серверов имен, с которыми мы должны связаться, но реальные сетевые соединения устанавливаются только по IP-адресу: как мы можем найти их? Чтобы избежать явной проблемы "курица и яйцо", сервер GTLD предоставляет не только имена хостов авторитетных серверов, но и их IP-адреса. Они предоставляются в виде записей A в разделе "Дополнительные записи" и называются "glue data" (клейкие данные). Поскольку этот сервер имен не может дать нам окончательного ответа, он устанавливает флаг AA=0 (Authoritative Answer) равным нулю, указывая, что кто-то другой знает настоящую историю, и нам нужно продолжать обращаться за информацией. Но важно отметить: сервер dnsr1 очень загружен, у него, возможно, сотни незавершенных запросов каждую секунду. Как он узнает, что этот ответный пакет является ответом на конкретный ожидающий запрос? Ответ: путем сопоставления по идентификатору запроса. Входящие DNS-пакеты, у которых нет ожидающего идентификатора запроса, игнорируются.

---

Запрос об IP-адресе (Linux и Windows):  
```
nslookup   server.ru
```

Запрос с указанием типа записи в базе DNS и DNS-сервера, к которому обращаемся:

Windows
```
nslookup   -type=MX  -d2  mail.ru.  8.8.8.8
```
Linux
```
dig    @8.8.8.8    mail.ru   MX
```

Результат вызова dig - спрашиваем у одного из корневых серверов адрес воскресной школы мехмата. Сервер отсылает нас к DNS-серверам зоны ru. Секции ответов нет – она пустая, т.е. корневой сервер не знает адреса воскресной компьютерной школы мехмата. Зато он знает у кого можно спросить еще. В дополнении указаны IP-адреса серверов, у которых можно спросить.
```
$ dig @f.root-servers.net sunschool.mmcs.sfedu.ru A
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 42772
;; flags: qr rd; QUERY: 1, ANSWER: 0, AUTHORITY: 7, ADDITIONAL: 7
;; QUESTION SECTION:
;sunschool.mmcs.sfedu.ru.               IN      A
;; AUTHORITY SECTION:
ru.                     172800  IN      NS      NS9.RIPN.NET.
ru.                     172800  IN      NS      AUTH60.NS.UU.NET.
ru.                     172800  IN      NS      NS.RIPN.NET.
ru.                     172800  IN      NS      NS5.MSK-IX.NET.
;; ADDITIONAL SECTION:
NS.RIPN.NET.            172800  IN      A       194.85.105.17
NS5.MSK-IX.NET.         172800  IN      A       193.232.128.6
NS9.RIPN.NET.           172800  IN      A       194.85.252.62
AUTH60.NS.UU.NET.       172800  IN      A       198.6.1.181
```
---

Сервер DNS для Linux 
**BIND** (*Berkeley Internet Name Domain*) - программный пакет системы DNS для UNIX систем

Функции сервера DNS в этом пакете реализует программа named (от «name daemon»)

Конфигурационные файлы:
- /etc/host.conf - определяются методы и порядок преобразования имен ОС Linux
- /etc/bind/named.conf – опции программы named и список файлов, в которых находятся описания зон